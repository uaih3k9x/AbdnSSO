{"openapi":"3.0.1","info":{"title":"AbdnSSO","description":"","version":"1.0.0"},"tags":[{"name":"login"}],"paths":{"/logger":{"post":{"summary":"logger","deprecated":false,"description":"向日志中写入一条日志","tags":[],"parameters":[{"name":"level","in":"query","description":"日志等级，参考log4j","required":false,"schema":{"type":"integer"}},{"name":"AppID","in":"query","description":"","required":true,"schema":{"type":"string"}},{"name":"AppSecret","in":"query","description":"","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"text":{"example":"App Exited.","type":"string"}}}}}},"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"Message":{"type":"string","description":"Logged."}},"required":["Message"]}}}}},"security":[]}},"/login":{"post":{"summary":"用户登录","deprecated":false,"description":"##用户登录API","tags":["login"],"parameters":[{"name":"id","in":"query","description":"学号","required":false,"schema":{"type":"string"}},{"name":"password","in":"query","description":"经过sha256后的用户密码","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"Message":{"type":"string","description":"登录返回信息"},"Class":{"type":"string","description":"用户班级"},"Name":{"type":"string","description":"用户姓名"},"JWT":{"type":"string","description":"token"}},"required":["Class","Name","JWT","Message"]}}}},"401":{"description":"没有权限","content":{"application/json":{"schema":{"type":"object","properties":{}}}}}},"security":[]}},"/hb":{"get":{"summary":"心跳遥测","deprecated":false,"description":"只需要返回200 OK即可","tags":[],"parameters":[],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{},"required":["01HYANN298VS6NTBDMGR64GVTP"]}}}}},"security":[]}},"/register":{"post":{"summary":"用户注册","deprecated":false,"description":"用户注册","tags":[],"parameters":[{"name":"id","in":"query","description":"","required":false,"schema":{"type":"string"}},{"name":"tel","in":"query","description":"","required":false,"schema":{"type":"string"}},{"name":"pass","in":"query","description":"","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"Message":{"type":"string","description":"信息"},"Name":{"type":"string","description":"用户姓名"}},"required":["Message","Name"]}}}},"401":{"description":"已注册","content":{"application/json":{"schema":{"title":"","type":"object","properties":{"Message":{"type":"string","description":"信息：“用户已注册”"}},"required":["Message"]}}}},"403":{"description":"信息不匹配","content":{"application/json":{"schema":{"title":"","type":"object","properties":{"Message":{"type":"string","description":"注册失败"}},"required":["Message"]}}}}},"security":[]}},"/log":{"get":{"summary":"log获取","deprecated":false,"description":"获取核心最新100条日志","tags":[],"parameters":[{"name":"level","in":"query","description":"","required":false,"schema":{"type":"string"}},{"name":"token","in":"query","description":"","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"type":"object","properties":{}},"examples":{"1":{"summary":"成功示例","value":"2024-05-20 12:00:00 TRACE  LogExample:9 - 这是一个跟踪信息。\r\n2024-05-20 12:00:00 DEBUG  LogExample:10 - 这是一个调试信息。\r\n2024-05-20 12:00:00 INFO   LogExample:11 - 这是一个信息日志。\r\n2024-05-20 12:00:00 WARN   LogExample:12 - 这是一个警告信息。\r\n2024-05-20 12:00:00 ERROR  LogExample:13 - 这是一个错误信息。\r\n2024-05-20 12:00:00 FATAL  LogExample:14 - 这是一个致命错误信息。\r\n2024-05-20 12:00:00 ERROR  LogExample:21 - 除法运算出错: / by zero\r\n2024-05-20 12:00:00 ERROR  LogExample:28 - 数组越界异常: 3\r\n"}}}}}},"security":[]}},"/auth/token":{"get":{"summary":"向网关验证token","deprecated":false,"description":"提供id与token可以验证当前时间内token是否有效","tags":[],"parameters":[{"name":"id","in":"query","description":"ID 编号","required":false,"schema":{"type":"string"}},{"name":"token","in":"query","description":"需要验证的用户token","required":false,"schema":{"type":"string"}},{"name":"AppID","in":"query","description":"子程序ID","required":false,"schema":{"type":"string"}},{"name":"AppSecret","in":"query","description":"子程序TOTP令牌","required":false,"schema":{"type":"string"}},{"name":"Cookie","in":"header","description":"","required":false,"example":"","schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"Message":{"type":"string","description":"OK"}},"required":["Message"]}}}},"403":{"description":"禁止访问","content":{"application/json":{"schema":{"title":"","type":"object","properties":{"Message":{"type":"string","description":"令牌过期"}},"required":["Message"]}}}}},"security":[]}},"/auth/expand":{"get":{"summary":"token续期","deprecated":false,"description":"token续期，只允许后端进行调用","tags":[],"parameters":[{"name":"token","in":"query","description":"需要续期的token","required":false,"schema":{"type":"string"}},{"name":"time","in":"query","description":"续期长度，单位秒","required":false,"example":"3600","schema":{"type":"string"}},{"name":"AppID","in":"query","description":"后端标识符","required":false,"schema":{"type":"string"}},{"name":"AppSecret","in":"query","description":"后端令牌，基于当前时间生成TOTP","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{}}}}}},"security":[]}},"/totp":{"get":{"summary":"TOTP生成","deprecated":false,"description":"给个secret就可以生成当前时间的TOTP，无其他任何作用，请务必小心Secret泄露的问题","tags":[],"parameters":[{"name":"secret","in":"query","description":"","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string"}},"required":["code"]}}}}},"security":[]}}},"components":{"schemas":{"User":{"type":"object","properties":{}}},"securitySchemes":{}},"servers":[]}